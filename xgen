#!/bin/sh

# function to return xresources colours (e.g. #808080) and dpi, etc.
xquery () {
    xrdb -query | grep $1 | awk '{print $NF; exit}'
}

# return hex without hash - useful in some instances
xquerystrip () {
    xquery $1 | tr -d \#
}

# get exact DPI as scale factor (DPI 96 = scale 1)
XDPI=$(bc <<< "scale=2; $(xquery dpi)/96")

# function to apply DPI to input num
dpi () {
    VAL=$(bc <<< "scale=2; $1 * $XDPI"); # multiply input by DPI
    # return value rounded to nearest integer
    printf "%.0f\n" "$(bc <<< "scale=2; $VAL + 0.01")"
            # add 0.01 so that 2.5 rounds to 3, not 2
}

cat<< EOF > $2
$(source $1)
EOF
